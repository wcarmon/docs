# --------------------------------------------------------------------
# -- Debugging:
# kubectl describe svc postgres-svc
# kubectl get svc postgres-svc
#
# kubectl logs --selector app=postgres
# kubectl get events --namespace=default
#
#
# -- Access inside cluster:
# postgres-svc:5432
#
# -- Access outside cluster:
# -- See postgres.ing.yaml
# --------------------------------------------------------------------

apiVersion: v1
kind: Service
metadata:
  labels:
    app: postgres
  name: postgres-svc
  namespace: default

spec:

  # -- Headless Service (no IP allocated)
  # -- Access directly thru the Pod
  # clusterIP: None

  ports:
    - name: pg-port
      # -- exposed
      port: 5432
      protocol: TCP
      # -- inside the container (container app listens on this port)
      targetPort: 5432
      nodePort: 30737

  selector:
    app: postgres

  # -- Only accessible inside cluster
  # type: ClusterIP

  # -- Same port exposed on all nodes in cluster
  # -- Default range: 30000-32767
  type: NodePort
