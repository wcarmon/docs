# --------------------------------------------------------------------
# -- Debugging:
# kubectl get ing my-ingress
# kubectl describe ing my-ingress
#
#
# -- Jaeger specific:
# These two paths must match for Jaeger to work:
#     - deployment.spec.template.spec.containers.env.QUERY_BASE_PATH
#     - ingress.spec.rules.http.paths.path
#
#
# -- Accessing UI outside the cluster:
# echo "Navigate to:  http://$(minikube ip)/jaeger"
# --------------------------------------------------------------------

apiVersion: networking.k8s.io/v1
kind: Ingress

metadata:
  name: my-ingress
  namespace: default

spec:
  rules:
    - http:
        paths:
          - backend:
              service:
                # -- must match service.metadata.name
                name: jaeger-service

                port:
                  # -- must match service port for browser ui
                  number: 16686

            # -- must match deployment.spec.template.spec.containers.env.QUERY_BASE_PATH
            path: /jaeger

            pathType: Prefix